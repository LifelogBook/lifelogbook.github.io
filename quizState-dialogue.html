<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U.S. Capitals Quiz!</title>
    <style>
        /* CSS는 여기에 직접 넣거나 별도 파일로 분리할 수 있습니다. */
        body { font-family: 'Arial', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f4f4f4; text-align: center; }
        .container { max-width: 500px; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); background-color: white; }
        h1 { color: #333; }
        #question-area { font-size: 1.5em; margin-bottom: 20px; font-weight: bold; }
        .answer-button { width: 100%; padding: 15px; margin: 5px 0; font-size: 1.1em; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9; cursor: pointer; transition: background-color 0.3s; text-align: left; }
        .answer-button:hover { background-color: #e9e9e9; }
        .answer-button.correct { background-color: #d4edda; border-color: #c3e6cb; }
        .answer-button.incorrect { background-color: #f8d7da; border-color: #f5c6cb; }
        #result-area { margin-top: 20px; font-size: 1.2em; min-height: 30px; }
        #next-button { padding: 10px 25px; font-size: 1.1em; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; display: none; }
        #next-button:hover { background-color: #0056b3; }
        .play-again-button { padding: 10px 25px; font-size: 1.1em; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h1>U.S. Capitals Quiz!</h1>
    <p id="instruction">Match the State with its Capital City.</p>
    <div id="quiz-content">
        </div>
</div>

<script>
    // 미국 주와 수도 데이터를 저장하는 객체입니다.
    const stateCapitals = {
        'Alabama': 'Montgomery', 'Alaska': 'Juneau', 'Arizona': 'Phoenix', 'Arkansas': 'Little Rock', 'California': 'Sacramento', 'Colorado': 'Denver',
        'Connecticut': 'Hartford', 'Delaware': 'Dover', 'Florida': 'Tallahassee', 'Georgia': 'Atlanta', 'Hawaii': 'Honolulu', 'Idaho': 'Boise',
        'Illinois': 'Springfield', 'Indiana': 'Indianapolis', 'Iowa': 'Des Moines', 'Kansas': 'Topeka', 'Kentucky': 'Frankfort', 'Louisiana': 'Baton Rouge',
        'Maine': 'Augusta', 'Maryland': 'Annapolis', 'Massachusetts': 'Boston', 'Michigan': 'Lansing', 'Minnesota': 'Saint Paul', 'Mississippi': 'Jackson',
        'Missouri': 'Jefferson City', 'Montana': 'Helena', 'Nebraska': 'Lincoln', 'Nevada': 'Carson City', 'New Hampshire': 'Concord', 'New Jersey': 'Trenton',
        'New Mexico': 'Santa Fe', 'New York': 'Albany', 'North Carolina': 'Raleigh', 'North Dakota': 'Bismarck', 'Ohio': 'Columbus', 'Oklahoma': 'Oklahoma City',
        'Oregon': 'Salem', 'Pennsylvania': 'Harrisburg', 'Rhode Island': 'Providence', 'South Carolina': 'Columbia', 'South Dakota': 'Pierre', 'Tennessee': 'Nashville',
        'Texas': 'Austin', 'Utah': 'Salt Lake City', 'Vermont': 'Montpelier', 'Virginia': 'Richmond', 'Washington': 'Olympia', 'West Virginia': 'Charleston',
        'Wisconsin': 'Madison', 'Wyoming': 'Cheyenne'
    };

    let shuffledStates = []; // 무작위로 섞인 주 이름을 저장할 배열
    let currentQuestionIndex = 0; // 현재 문제 인덱스
    let score = 0; // 점수
    const totalQuestions = 50; // 총 출제할 문제 수

    // HTML 요소들을 가져옵니다.
    const quizContent = document.getElementById('quiz-content');
    const instruction = document.getElementById('instruction');

    // 배열을 무작위로 섞는 함수 (Fisher-Yates 알고리즘)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // 퀴즈를 시작하는 함수
    function startQuiz() {
        shuffledStates = Object.keys(stateCapitals);
        shuffleArray(shuffledStates);
        currentQuestionIndex = 0;
        score = 0;

        // 퀴즈 UI를 초기 상태로 복원합니다.
        quizContent.innerHTML = `
            <h2 id="question-area"></h2>
            <div id="options-container"></div>
            <div id="result-area"></div>
            <button id="next-button">Next Question</button>
        `;
        instruction.style.display = 'block';
        
        // 새로 생성된 버튼에 이벤트 리스너를 다시 연결합니다.
        document.getElementById('next-button').addEventListener('click', () => {
            currentQuestionIndex++;
            loadQuestion();
        });

        loadQuestion();
    }

    // 다음 문제를 로드하는 함수
    function loadQuestion() {
        if (currentQuestionIndex >= totalQuestions) {
            endQuiz();
            return;
        }

        const questionArea = document.getElementById('question-area');
        const optionsContainer = document.getElementById('options-container');
        const resultArea = document.getElementById('result-area');
        const nextButton = document.getElementById('next-button');

        instruction.textContent = `Question ${currentQuestionIndex + 1}/${totalQuestions} | Score: ${score}`;

        const currentQuestionState = shuffledStates[currentQuestionIndex];
        const correctAnswer = stateCapitals[currentQuestionState];

        questionArea.textContent = currentQuestionState;
        optionsContainer.innerHTML = '';
        resultArea.innerHTML = '';
        nextButton.style.display = 'none';

        const allCapitals = Object.values(stateCapitals);
        const wrongAnswers = allCapitals.filter(capital => capital !== correctAnswer);
        shuffleArray(wrongAnswers);
        const options = [correctAnswer, ...wrongAnswers.slice(0, 3)];
        shuffleArray(options);

        options.forEach(option => {
            const button = document.createElement('button');
            button.className = 'answer-button';
            button.textContent = option;
            button.addEventListener('click', () => checkAnswer(button, option, correctAnswer));
            optionsContainer.appendChild(button);
        });
    }

    // 정답을 확인하는 함수
    function checkAnswer(button, selectedAnswer, correctAnswer) {
        document.querySelectorAll('.answer-button').forEach(btn => {
            btn.disabled = true;
            if (btn.textContent === correctAnswer) {
                btn.classList.add('correct');
            } else {
                btn.classList.add('incorrect');
            }
        });

        const resultArea = document.getElementById('result-area');
        const nextButton = document.getElementById('next-button');

        if (selectedAnswer === correctAnswer) {
            resultArea.innerHTML = `<span style="color:#28a745; font-weight:bold;">Correct!</span>`;
            score++;
        } else {
            resultArea.innerHTML = `<span style="color:#dc3545; font-weight:bold;">Incorrect. The correct answer is ${correctAnswer}.</span>`;
        }
        
        nextButton.style.display = 'block';
    }

    // 퀴즈 종료 화면을 보여주는 함수
    function endQuiz() {
        quizContent.innerHTML = `
            <h2>Quiz finished!</h2>
            <p>You got ${score} out of ${totalQuestions} questions correct. Great job!</p>
        `;
        
        // 'Play Again' 버튼을 생성하고 이벤트 리스너를 연결합니다.
        const playAgainButton = document.createElement('button');
        playAgainButton.textContent = 'Play Again';
        playAgainButton.className = 'play-again-button';
        playAgainButton.addEventListener('click', startQuiz);
        quizContent.appendChild(playAgainButton);

        instruction.style.display = 'none';
    }

    // 페이지 로드 시 퀴즈 시작
    window.onload = startQuiz;
</script>

</body>
</html>