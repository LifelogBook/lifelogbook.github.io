<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capital to State Quiz!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        #instruction {
            margin-bottom: 20px;
        }
        #question-area {
            font-size: 2.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }
        #answer-input {
            padding: 10px;
            font-size: 1.2em;
            width: 80%;
            border: 2px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        #submit-button {
            padding: 10px 20px;
            font-size: 1.2em;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #submit-button:hover {
            background-color: #0056b3;
        }
        #result-area {
            margin-top: 20px;
            font-size: 1.2em;
            min-height: 40px;
        }
        .correct {
            color: #28a745;
            font-weight: bold;
        }
        .incorrect {
            color: #dc3545;
            font-weight: bold;
        }
        .play-again-button {
            padding: 10px 25px;
            font-size: 1.1em;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container" id="quiz-container">
    <h1>Capital to State Quiz!</h1>
    <p id="instruction">Type the state for the capital city shown below.</p>
    <h2 id="question-area"></h2>
    <input type="text" id="answer-input" placeholder="Enter your answer here">
    <br>
    <button id="submit-button">Submit</button>
    <p id="result-area"></p>
</div>

<script>
    // 미국 주와 수도 데이터를 저장하는 객체입니다.
    const stateCapitals = {
        'Alabama': 'Montgomery', 'Alaska': 'Juneau', 'Arizona': 'Phoenix', 'Arkansas': 'Little Rock', 'California': 'Sacramento', 'Colorado': 'Denver',
        'Connecticut': 'Hartford', 'Delaware': 'Dover', 'Florida': 'Tallahassee', 'Georgia': 'Atlanta', 'Hawaii': 'Honolulu', 'Idaho': 'Boise',
        'Illinois': 'Springfield', 'Indiana': 'Indianapolis', 'Iowa': 'Des Moines', 'Kansas': 'Topeka', 'Kentucky': 'Frankfort', 'Louisiana': 'Baton Rouge',
        'Maine': 'Augusta', 'Maryland': 'Annapolis', 'Massachusetts': 'Boston', 'Michigan': 'Lansing', 'Minnesota': 'Saint Paul', 'Mississippi': 'Jackson',
        'Missouri': 'Jefferson City', 'Montana': 'Helena', 'Nebraska': 'Lincoln', 'Nevada': 'Carson City', 'New Hampshire': 'Concord', 'New Jersey': 'Trenton',
        'New Mexico': 'Santa Fe', 'New York': 'Albany', 'North Carolina': 'Raleigh', 'North Dakota': 'Bismarck', 'Ohio': 'Columbus', 'Oklahoma': 'Oklahoma City',
        'Oregon': 'Salem', 'Pennsylvania': 'Harrisburg', 'Rhode Island': 'Providence', 'South Carolina': 'Columbia', 'South Dakota': 'Pierre', 'Tennessee': 'Nashville',
        'Texas': 'Austin', 'Utah': 'Salt Lake City', 'Vermont': 'Montpelier', 'Virginia': 'Richmond', 'Washington': 'Olympia', 'West Virginia': 'Charleston',
        'Wisconsin': 'Madison', 'Wyoming': 'Cheyenne'
    };

    let shuffledStates = []; // 무작위로 섞인 주 이름을 저장할 배열
    let currentQuestionIndex = 0; // 현재 문제 인덱스
    let score = 0; // 점수
    const totalQuestions = 50; // 모든 주를 포함하도록 총 문제 수를 50개로 고정합니다.

    // HTML 요소들을 가져옵니다.
    const quizContainer = document.getElementById('quiz-container');
    let questionArea, answerInput, submitButton, resultArea, instruction;

    // 배열을 무작위로 섞는 함수 (Fisher-Yates 알고리즘)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // 퀴즈를 시작하는 함수
    function startQuiz() {
        // 기존 퀴즈 UI를 다시 만듭니다.
        quizContainer.innerHTML = `
            <h1>Capital to State Quiz!</h1>
            <p id="instruction">Type the state for the capital city shown below.</p>
            <h2 id="question-area"></h2>
            <input type="text" id="answer-input" placeholder="Enter your answer here">
            <br>
            <button id="submit-button">Submit</button>
            <p id="result-area"></p>
        `;

        // 새로운 요소들을 다시 할당합니다.
        questionArea = document.getElementById('question-area');
        answerInput = document.getElementById('answer-input');
        submitButton = document.getElementById('submit-button');
        resultArea = document.getElementById('result-area');
        instruction = document.getElementById('instruction');

        // 이벤트 리스너를 다시 연결합니다.
        submitButton.addEventListener('click', checkAnswer);
        answerInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        });

        shuffledStates = Object.keys(stateCapitals);
        shuffleArray(shuffledStates);
        currentQuestionIndex = 0;
        score = 0;
        loadQuestion();
    }

    // 다음 문제를 로드하는 함수
    function loadQuestion() {
        if (currentQuestionIndex >= totalQuestions) {
            endQuiz();
            return;
        }

        // 현재 문제 진행 상황을 표시합니다.
        instruction.textContent = `Question ${currentQuestionIndex + 1}/${totalQuestions} | Score: ${score}`;
        
        const currentQuestionState = shuffledStates[currentQuestionIndex];
        const currentQuestionCapital = stateCapitals[currentQuestionState]; // 여기서 수도 이름을 가져옵니다.

        questionArea.textContent = currentQuestionCapital; // 화면에 수도 이름을 표시합니다.
        answerInput.value = ''; // 입력창을 비웁니다.
        resultArea.innerHTML = ''; // 결과 메시지를 지웁니다.
        answerInput.focus(); // 입력창에 자동으로 커서를 둡니다.
    }

    // 제출 버튼을 눌렀을 때 실행되는 함수
    function checkAnswer() {
        const userAnswer = answerInput.value.trim(); // 사용자가 입력한 답을 가져옵니다.
        const correctAnswer = shuffledStates[currentQuestionIndex]; // 정답은 주 이름입니다.

        // 대소문자 구분 없이 비교하기 위해 소문자로 변환합니다.
        if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
            resultArea.innerHTML = `<span class="correct">Correct!</span>`;
            score++;
        } else {
            resultArea.innerHTML = `<span class="incorrect">Incorrect. The correct answer is ${correctAnswer}.</span>`;
        }

        // 잠시 후 다음 문제로 넘어갑니다.
        currentQuestionIndex++;
        setTimeout(loadQuestion, 2000); // 2초 후에 새로운 문제 시작
    }

    // 퀴즈 종료 화면을 보여주는 함수
    function endQuiz() {
        quizContainer.innerHTML = `
            <h2>Quiz finished!</h2>
            <p>You got ${score} out of ${totalQuestions} questions correct. Great job!</p>
        `;
        
        // 'Play Again' 버튼을 생성하고 이벤트 리스너를 연결합니다.
        const playAgainButton = document.createElement('button');
        playAgainButton.textContent = 'Play Again';
        playAgainButton.className = 'play-again-button';
        playAgainButton.addEventListener('click', startQuiz);
        quizContainer.appendChild(playAgainButton);
    }

    // 페이지 로드 시 퀴즈 시작
    window.onload = startQuiz;
</script>

</body>
</html>